
<app-confirmar-eliminacion [(mostrarModalConfirmarEliminar)]="mostrarModalConfirmarEliminar" [id]="titular._id" (aceptarClick)="aceptarClickModalEliminar()" (cancelarClick)="cancelarClickModalEliminar()"></app-confirmar-eliminacion>

<c-toaster [placement]="positionToast" class="p-3" position="fixed">
    <c-toast
      (timer)="onTimerChange($event)"
      (visibleChange)="onVisibleChange($event)"
      [visible]="visibleToast" color="primary" class="text-white">
      <c-toast-header >
        {{tituloToast}}
      </c-toast-header>
      <c-toast-body>
        <p>{{mensajeToast}}</p>
        <c-progress thin>
          <c-progress-bar [value]="percentageToast"></c-progress-bar>
        </c-progress>
      </c-toast-body>
    </c-toast>
  </c-toaster>
   

<c-modal #staticBackdropModal backdrop="static" id="staticBackdropModal" size="xl" [visible]="visibleModal" (visibleChange)="handleLiveDemoChange($event)">
    <c-modal-header class="bg-primary text-white">
        <h5 cModalTitle>Titular</h5>
        <button [cModalToggle]="staticBackdropModal.id" cButtonClose class="bg-light"></button>
    </c-modal-header>

    <c-modal-body>
        <c-row>
            <c-col xs="12">
                <form cForm class="row g-3">
                    <c-col md="4">
                        <label cLabel for="nombre"><strong>Nombre</strong></label>
                        <input [(ngModel)]="titular.nombre" cFormControl id="nombre" name="nombre" placeholder="nombre"  type="text" />
                    </c-col>

                    <c-col md="4">
                        <label cLabel for="primer_apellido"><strong>primer_apellido</strong></label>
                        <input [(ngModel)]="titular.primer_apellido" cFormControl id="primer_apellido" name="primer_apellido" placeholder="primer_apellido"  type="text" />
                    </c-col>

                    <c-col md="4">
                        <label cLabel for="segundo_apellido"><strong>segundo_apellido</strong></label>
                        <input [(ngModel)]="titular.segundo_apellido" cFormControl id="segundo_apellido" name="segundo_apellido" placeholder="segundo_apellido" 
                            type="text" />
                    </c-col>

                    <c-col md="4">
                        <label cLabel for="sexo"><strong>sexo</strong></label>
                        <input [(ngModel)]="titular.sexo" cFormControl id="sexo" name="sexo" placeholder="sexo"  type="text" />
                    </c-col>

                    <c-col md="4">
                        <label cLabel for="fecha_nacimiento"><strong>fecha_nacimiento</strong></label>
                        <input [(ngModel)]="titular.fecha_nacimiento" cFormControl id="fecha_nacimiento" name="fecha_nacimiento" placeholder="fecha_nacimiento"  type="date" />
                    </c-col>

                </form>
            </c-col>
        </c-row>
    </c-modal-body>

    <c-modal-footer>
        <button cButton color="primary" cTextColor="white" (click)="guardar()">Guardar</button>
        <button (click)="botonCancelarModal()" cButton color="secondary">Cancelar</button>
    </c-modal-footer>
</c-modal>

<c-row>
    <c-col xs="12">
        <button (click)="mostrarFormularioNuevo()" cButton class="mb-3">Nuevo</button>
        <c-card class="mb-4">
            <c-card-header>
                <strong class="text-success">TITULARES</strong>
            </c-card-header>
            <c-card-body>
                <c-col xs="12">
                    <table cTable [striped]="true" [responsive]="true" hover bordered>
                        <thead cTableColor="dark">
                            <tr>
                                <th>Nombre</th>
                                <th>Primer Apellido</th>
                                <th>Segundo Apellido</th>
                                <th>Sexo</th>
                                <th>Fecha Nacimiento</th>
                                <th>Acciones</th>
                            </tr>
                        </thead>
                        <tbody>
                            @for (x of titulares; track $index) {
                            <tr id="fila{{x._id}}">
                                <td>{{x.nombre}}</td>
                                <td>{{x.primer_apellido}}</td>
                                <td>{{x.segundo_apellido}}</td>
                                <td>{{x.sexo}}</td>
                                <td>{{x.fecha_nacimiento}}</td>
                                <td>
                                    <button cButton (click)="mostrarEditar(x)" color="info" variant="outline">Editar</button>
                                    <button cButton (click)="mostrarConfirmarEliminar(x)" color="danger" variant="outline">Eliminar</button>
                                </td>
                            </tr>
                            }
                        </tbody>
                    </table>
                </c-col>
            </c-card-body>
        </c-card>
    </c-col>

</c-row>